<h2>Appointments</h2>

<!-- Show user's role for debugging -->
<p>Logged in as: <strong>{{ userRole }}</strong></p>

<!-- Add Appointment button for Receptionist or Admin -->
<button 
  *ngIf="userRole === 'RECEPTIONIST' || userRole === 'ADMIN'" 
  [routerLink]="['/appointments/add']">
  Add Appointment
</button>

<!-- Appointment table -->
<table border="1" cellspacing="0" cellpadding="8">
  <thead>
    <tr>
      <th>ID</th>
      <th>Patient</th>
      <th>Animal</th>
      <th>Owner</th>
      <th>Date</th>
      <th>Duration</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let appt of appointments">
        <td>{{ appt.appointmentId }}</td>
        <td>{{ appt.patientName }}</td>
        <td>{{ appt.animalType }}</td>
        <td>{{ appt.ownerName }} {{ appt.ownerSurname }}</td>
        <td>{{ appt.appointmentDate }} {{ appt.appointmentTime }}</td>
        <td>{{ appt.appointmentDuration }} mins</td>
        <td>
        <button [routerLink]="['/appointments/view', appt.appointmentId]">View</button>

        <!-- VET or ADMIN can update -->
        <button 
          *ngIf="userRole === 'VET' || userRole === 'ADMIN'" 
          [routerLink]="['/appointments/update', appt.appointmentId]">
          Edit
        </button>

        <!-- Only ADMIN can delete -->
        <button 
          *ngIf="userRole === 'ADMIN'" 
          (click)="deleteAppointment(appt.appointmentId)">
          Delete
        </button>
      </td>
    </tr>
  </tbody>
</table>
